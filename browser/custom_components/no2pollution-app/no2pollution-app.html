<link rel="import" href="../../bower_components/polymer/polymer.html" />

<!-- Iron -->
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html" />
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html" />
<link rel="import" href="../../bower_components/iron-icons/image-icons.html" />
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html" />
<!-- Paper -->
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html" />
<link rel="import" href="../../bower_components/paper-tooltip/paper-tooltip.html" />
<!-- Neon -->
<!-- Custom/Behaviors -->
<!-- Other -->
<link rel="import" href="../../bower_components/geo-location/geo-location.html">
<link rel="import" href="../../bower_components/google-map/google-map.html" />
<link rel="import" href="../../bower_components/google-map/google-map-marker.html" />
<link rel="import" href="../../bower_components/google-map/google-map-point.html" />
<link rel="import" href="../../bower_components/google-map/google-map-poly.html" />

<link rel="import" href="../../bower_components/paper-fab-transitions/paper-fab-speed-dial.html" />

<dom-module id="no2pollution-app">
    <link rel="import" type="css" href="no2pollution-app.css?__inline" />
    <template>
        <iron-ajax id="ajax" url="https://no2pollution.herokuapp.com/api/v1/route"></iron-ajax>

        <geo-location watch-pos high-accuracy latitude="{{userLatitude}}" longitude="{{userLongitude}}"></geo-location>
        <park-finder api-key="[[apiKey]]"></park-finder>

        <google-map id="map-canvas" map="{{map}}" api-key="[[apiKey]]" class="fit" latitude="51.5100" longitude="-360.1212" click-events mouse-events>
            <google-map-marker id="myLocationMarker" latitude="[[userLatitude]]" longitude="[[userLongitude]]"></google-map-marker>
            <google-map-marker id="parkMarker"></google-map-marker>
            <map-circle></map-circle>

            <template is="dom-repeat" id="template-paths" items="{{paths}}" as="path">
                <google-map-poly clickable click-events>
                    <template is="dom-repeat" items="{{path.polyline}}">
                        <google-map-point latitude="{{item.lat}}" longitude="{{item.lng}}"></google-map-point>
                    </template>
                </google-map-poly>
            </template>
        </google-map>

        <no2pollution-search id="search" map="{{map}}"></no2pollution-search>

        <paper-fab-speed-dial>
            <paper-fab icon="menu" class="dropdown-trigger"></paper-fab>
            <div class="dropdown-content">
                <paper-fab id="myLocationBtn" icon="maps:my-location" mini></paper-fab>
                <paper-fab id="findParkBtn" icon="image:nature" mini></paper-fab>
                <paper-fab id="getDirBtn" icon="maps:directions" mini></paper-fab>
            </div>
        </paper-fab-speed-dial>

        <!-- Tooltip -->
        <paper-tooltip for="myLocationBtn" position="left">Getting your location</paper-tooltip>
        <paper-tooltip for="findParkBtn" position="left">Find nearest park</paper-tooltip>
        <paper-tooltip for="getDirBtn" position="left">Bring me somewhere!</paper-tooltip>
    </template>
    <script src="no2pollution-app.js?__inline"></script>
</dom-module>
